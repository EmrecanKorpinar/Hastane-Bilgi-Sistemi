{"ast":null,"code":"// Mock Patient Service - Backend olmadan çalışır\n\n// LocalStorage'dan hastaları oku\nfunction getPatients() {\n  const data = localStorage.getItem('hbs-patients');\n  return data ? JSON.parse(data) : [];\n}\n\n// LocalStorage'a hastaları yaz\nfunction savePatients(patients) {\n  localStorage.setItem('hbs-patients', JSON.stringify(patients));\n}\n\n// Dosya numarası oluştur\nfunction generateFileNumber() {\n  const year = new Date().getFullYear();\n  const patients = getPatients();\n  const count = patients.length + 1;\n  return `HBS-${year}-${String(count).padStart(6, '0')}`;\n}\n\n// UUID oluştur\nfunction generateId() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\nexport const mockPatientService = {\n  // Yeni hasta oluştur\n  createPatient: async request => {\n    // 500ms simüle delay\n    await new Promise(resolve => setTimeout(resolve, 500));\n    const patients = getPatients();\n\n    // TC Kimlik kontrolü\n    const existingPatient = patients.find(p => p.nationalId === request.nationalId);\n    if (existingPatient) {\n      throw new Error('Bu TC Kimlik No ile kayıtlı hasta zaten mevcut!');\n    }\n    const patientId = generateId();\n    const fileNumber = generateFileNumber();\n    const fullName = `${request.name} ${request.surname}`;\n    const newPatient = {\n      patientId,\n      fileNumber,\n      nationalId: request.nationalId,\n      name: request.name,\n      surname: request.surname,\n      fullName,\n      birthDate: request.birthDate,\n      gender: request.gender,\n      bloodType: request.bloodType,\n      phone: request.phone,\n      email: request.email,\n      address: request.address,\n      city: request.city,\n      country: request.country || 'Türkiye',\n      active: true,\n      emergencyContact: request.emergencyContact,\n      emergencyPhone: request.emergencyPhone\n    };\n    patients.push(newPatient);\n    savePatients(patients);\n    return {\n      patientId,\n      fileNumber,\n      nationalId: request.nationalId,\n      fullName,\n      birthDate: request.birthDate,\n      gender: request.gender,\n      phone: request.phone,\n      email: request.email,\n      city: request.city,\n      bloodType: request.bloodType,\n      active: true\n    };\n  },\n  // Aktif hastaları getir\n  getActivePatients: async () => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    const patients = getPatients();\n    return patients.filter(p => p.active);\n  },\n  // Hasta ara\n  searchPatients: async query => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    const patients = getPatients();\n    const lowerQuery = query.toLowerCase();\n    return patients.filter(p => p.fullName.toLowerCase().includes(lowerQuery) || p.nationalId.includes(query) || p.phone && p.phone.includes(query) || p.email && p.email.toLowerCase().includes(lowerQuery));\n  },\n  // Hasta detayı getir\n  getPatientById: async patientId => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    const patients = getPatients();\n    return patients.find(p => p.patientId === patientId) || null;\n  }\n};\n\n// Demo data ekle (ilk çalıştırmada)\nexport function initializeDemoData() {\n  const patients = getPatients();\n  if (patients.length === 0) {\n    const demoPatients = [{\n      patientId: generateId(),\n      fileNumber: 'HBS-2026-000001',\n      nationalId: '12345678901',\n      name: 'Ahmet',\n      surname: 'Yılmaz',\n      fullName: 'Ahmet Yılmaz',\n      birthDate: '1985-03-15',\n      gender: 'MALE',\n      bloodType: 'A+',\n      phone: '+905551234567',\n      email: 'ahmet.yilmaz@example.com',\n      address: 'Kadıköy Mahallesi, Bahariye Caddesi No:123',\n      city: 'İstanbul',\n      country: 'Türkiye',\n      active: true,\n      emergencyContact: 'Ayşe Yılmaz',\n      emergencyPhone: '+905559876543'\n    }, {\n      patientId: generateId(),\n      fileNumber: 'HBS-2026-000002',\n      nationalId: '98765432101',\n      name: 'Fatma',\n      surname: 'Demir',\n      fullName: 'Fatma Demir',\n      birthDate: '1992-07-22',\n      gender: 'FEMALE',\n      bloodType: 'B+',\n      phone: '+905551112233',\n      email: 'fatma.demir@example.com',\n      address: 'Çankaya Mahallesi, Atatürk Bulvarı No:45',\n      city: 'Ankara',\n      country: 'Türkiye',\n      active: true\n    }, {\n      patientId: generateId(),\n      fileNumber: 'HBS-2026-000003',\n      nationalId: '11122233344',\n      name: 'Mehmet',\n      surname: 'Kaya',\n      fullName: 'Mehmet Kaya',\n      birthDate: '1978-11-05',\n      gender: 'MALE',\n      bloodType: '0+',\n      phone: '+905554445566',\n      email: 'mehmet.kaya@example.com',\n      city: 'İzmir',\n      country: 'Türkiye',\n      active: true\n    }];\n    savePatients(demoPatients);\n  }\n}","map":{"version":3,"names":["getPatients","data","localStorage","getItem","JSON","parse","savePatients","patients","setItem","stringify","generateFileNumber","year","Date","getFullYear","count","length","String","padStart","generateId","replace","c","r","Math","random","v","toString","mockPatientService","createPatient","request","Promise","resolve","setTimeout","existingPatient","find","p","nationalId","Error","patientId","fileNumber","fullName","name","surname","newPatient","birthDate","gender","bloodType","phone","email","address","city","country","active","emergencyContact","emergencyPhone","push","getActivePatients","filter","searchPatients","query","lowerQuery","toLowerCase","includes","getPatientById","initializeDemoData","demoPatients"],"sources":["C:/Users/90551/IdeaProjects/HBS/hbs-frontend/src/api/mockPatientService.ts"],"sourcesContent":["// Mock Patient Service - Backend olmadan çalışır\r\nimport { Patient, CreatePatientRequest, PatientResponse } from '../types/patient';\r\n\r\n// LocalStorage'dan hastaları oku\r\nfunction getPatients(): Patient[] {\r\n  const data = localStorage.getItem('hbs-patients');\r\n  return data ? JSON.parse(data) : [];\r\n}\r\n\r\n// LocalStorage'a hastaları yaz\r\nfunction savePatients(patients: Patient[]): void {\r\n  localStorage.setItem('hbs-patients', JSON.stringify(patients));\r\n}\r\n\r\n// Dosya numarası oluştur\r\nfunction generateFileNumber(): string {\r\n  const year = new Date().getFullYear();\r\n  const patients = getPatients();\r\n  const count = patients.length + 1;\r\n  return `HBS-${year}-${String(count).padStart(6, '0')}`;\r\n}\r\n\r\n// UUID oluştur\r\nfunction generateId(): string {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    const r = Math.random() * 16 | 0;\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nexport const mockPatientService = {\r\n  // Yeni hasta oluştur\r\n  createPatient: async (request: CreatePatientRequest): Promise<PatientResponse> => {\r\n    // 500ms simüle delay\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n    const patients = getPatients();\r\n\r\n    // TC Kimlik kontrolü\r\n    const existingPatient = patients.find(p => p.nationalId === request.nationalId);\r\n    if (existingPatient) {\r\n      throw new Error('Bu TC Kimlik No ile kayıtlı hasta zaten mevcut!');\r\n    }\r\n\r\n    const patientId = generateId();\r\n    const fileNumber = generateFileNumber();\r\n    const fullName = `${request.name} ${request.surname}`;\r\n\r\n    const newPatient: Patient = {\r\n      patientId,\r\n      fileNumber,\r\n      nationalId: request.nationalId,\r\n      name: request.name,\r\n      surname: request.surname,\r\n      fullName,\r\n      birthDate: request.birthDate,\r\n      gender: request.gender,\r\n      bloodType: request.bloodType,\r\n      phone: request.phone,\r\n      email: request.email,\r\n      address: request.address,\r\n      city: request.city,\r\n      country: request.country || 'Türkiye',\r\n      active: true,\r\n      emergencyContact: request.emergencyContact,\r\n      emergencyPhone: request.emergencyPhone,\r\n    };\r\n\r\n    patients.push(newPatient);\r\n    savePatients(patients);\r\n\r\n    return {\r\n      patientId,\r\n      fileNumber,\r\n      nationalId: request.nationalId,\r\n      fullName,\r\n      birthDate: request.birthDate,\r\n      gender: request.gender,\r\n      phone: request.phone,\r\n      email: request.email,\r\n      city: request.city,\r\n      bloodType: request.bloodType,\r\n      active: true,\r\n    };\r\n  },\r\n\r\n  // Aktif hastaları getir\r\n  getActivePatients: async (): Promise<Patient[]> => {\r\n    await new Promise(resolve => setTimeout(resolve, 300));\r\n    const patients = getPatients();\r\n    return patients.filter(p => p.active);\r\n  },\r\n\r\n  // Hasta ara\r\n  searchPatients: async (query: string): Promise<Patient[]> => {\r\n    await new Promise(resolve => setTimeout(resolve, 300));\r\n    const patients = getPatients();\r\n    const lowerQuery = query.toLowerCase();\r\n\r\n    return patients.filter(p =>\r\n      p.fullName.toLowerCase().includes(lowerQuery) ||\r\n      p.nationalId.includes(query) ||\r\n      (p.phone && p.phone.includes(query)) ||\r\n      (p.email && p.email.toLowerCase().includes(lowerQuery))\r\n    );\r\n  },\r\n\r\n  // Hasta detayı getir\r\n  getPatientById: async (patientId: string): Promise<Patient | null> => {\r\n    await new Promise(resolve => setTimeout(resolve, 300));\r\n    const patients = getPatients();\r\n    return patients.find(p => p.patientId === patientId) || null;\r\n  },\r\n};\r\n\r\n// Demo data ekle (ilk çalıştırmada)\r\nexport function initializeDemoData() {\r\n  const patients = getPatients();\r\n  if (patients.length === 0) {\r\n    const demoPatients: Patient[] = [\r\n      {\r\n        patientId: generateId(),\r\n        fileNumber: 'HBS-2026-000001',\r\n        nationalId: '12345678901',\r\n        name: 'Ahmet',\r\n        surname: 'Yılmaz',\r\n        fullName: 'Ahmet Yılmaz',\r\n        birthDate: '1985-03-15',\r\n        gender: 'MALE',\r\n        bloodType: 'A+',\r\n        phone: '+905551234567',\r\n        email: 'ahmet.yilmaz@example.com',\r\n        address: 'Kadıköy Mahallesi, Bahariye Caddesi No:123',\r\n        city: 'İstanbul',\r\n        country: 'Türkiye',\r\n        active: true,\r\n        emergencyContact: 'Ayşe Yılmaz',\r\n        emergencyPhone: '+905559876543',\r\n      },\r\n      {\r\n        patientId: generateId(),\r\n        fileNumber: 'HBS-2026-000002',\r\n        nationalId: '98765432101',\r\n        name: 'Fatma',\r\n        surname: 'Demir',\r\n        fullName: 'Fatma Demir',\r\n        birthDate: '1992-07-22',\r\n        gender: 'FEMALE',\r\n        bloodType: 'B+',\r\n        phone: '+905551112233',\r\n        email: 'fatma.demir@example.com',\r\n        address: 'Çankaya Mahallesi, Atatürk Bulvarı No:45',\r\n        city: 'Ankara',\r\n        country: 'Türkiye',\r\n        active: true,\r\n      },\r\n      {\r\n        patientId: generateId(),\r\n        fileNumber: 'HBS-2026-000003',\r\n        nationalId: '11122233344',\r\n        name: 'Mehmet',\r\n        surname: 'Kaya',\r\n        fullName: 'Mehmet Kaya',\r\n        birthDate: '1978-11-05',\r\n        gender: 'MALE',\r\n        bloodType: '0+',\r\n        phone: '+905554445566',\r\n        email: 'mehmet.kaya@example.com',\r\n        city: 'İzmir',\r\n        country: 'Türkiye',\r\n        active: true,\r\n      },\r\n    ];\r\n    savePatients(demoPatients);\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}